# Проектная работа Sprint 1

Необходимо разбить на микрофронтенды [проект](https://github.com/Yandex-Practicum/architecture-sprint-1)

## 1 Проектирование

Для реализации микрофронтендов будет использоваться фреймворк - Module Federation, так как с ним есть опыт работы (спасибо практической работе)

## 2 Планирование

В проекте четко выделяются зоны ответственности:
- Авторизация
- Настройка профиля
- Карточки с картинками

Можно подумать о выделение лайков в еще один микрофронтенд, что может пригодиться при расширении функционала (например добавят музыку и к ней тоже будут лайки), на текущем этапе удобней воспринимать лайки частью функционала карточек

## 3 Реализация

Создадим 4 микрофронтенда:
- hosts - рут для остальных
- auth - авторизация
- profile - настройка и отображение профиля
- cards - отображение, добавление, удаление карточек. Так же работа с лайками

Большая часть функционала была перенесена

Была попытка упоковать все микрофронтенды в docker-compose, но host падает при сборке, поправить не успел

``cd frontend/microfrontend && docker compose -f compose-micro.yaml up --build``

Так же добавлен вариант запуска всего приложения с микросервисами, но так же с косяками =)

``docker compose -f compose-micro.yaml up --build``

При разбиении приложения было найдено много мягко говоря узких моментов работы с микрофронтендами.

Один из грустных - useHistory используемый в микрофронтендах - будет ссылаться на историю микрофронтенда, что мешает сделать auth полностью независимым. В итоге приходится прокидывать из host такие моменты, что уменьшает независимость

выходит достаточно много связей с host, в итоге на нет сходит разделение ответственности, т.к. зачастую нужно делать промежуточный слой для обмена данными между фронтами.

Если в host для какой-то логики удобно ложится api микросервиса, то он импортируется асинхронно, что тоже не супер приятно в использовании

Периодически дублируются стили/картинки для микрофронтендов

Думаю есть много интересных решений как это дело можно упаковать, но уже сроки =)

# Задание 2

Походу не сегодня =)